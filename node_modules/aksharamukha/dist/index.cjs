"use strict";var _=Object.create;var u=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var S=(t,e)=>{for(var r in e)u(t,r,{get:e[r],enumerable:!0})},h=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of x(e))!A.call(t,i)&&i!==r&&u(t,i,{get:()=>e[i],enumerable:!(s=$(e,i))||s.enumerable});return t};var b=(t,e,r)=>(r=t!=null?_(v(t)):{},h(e||!t||!t.__esModule?u(r,"default",{value:t,enumerable:!0}):r,t)),D=t=>h(u({},"__esModule",{value:!0}),t);var F={};S(F,{ProcessParams:()=>O,default:()=>I,defaultProcessProps:()=>a});module.exports=D(F);var y=require("pyodide");var d=["jaconv-0.4.0-py3-none-any.whl","marisa_trie-1.3.2.dev0-cp313-cp313-pyodide_2025_0_wasm32.whl","aksharamukha-2.3-py3-none-any.whl"],f="https://github.com/paramsiddharth/aksharamukha.js/releases/download/v2.3.0-0";var C={},w=typeof window>"u"||typeof process<"u"&&process.versions?.node,O={default:"default",scriptCode:"script_code",langCode:"lang_code",langName:"lang_name"},a={nativize:!0,param:O.default,preOptions:[],postOptions:[]},l=class t{static _isTestEnv=!1;static _currentScript;pyodide;constructor(e){this.pyodide=e}static _setCurrentScript(e){this._currentScript=e}static async new(e){let r=e?.pyodide;r==null&&(this._isTestEnv?r=await N():r=await(0,y.loadPyodide)()),await r.loadPackage("micropip");let s=r.pyimport("micropip");if(w){let n=await import("fs");for(let o of d){let p,c=z();try{let m=`${c}/${o}`;p=n.readFileSync(m)}catch(m){console.warn(`Wheel file missing in script directory, trying ../../downloads: ${m}`);let k=`${c}/../../downloads/${o}`;p=n.readFileSync(k)}r.FS.writeFile(`/tmp/${o}`,p)}await s.install(d.map(o=>`emfs:/tmp/${o}`),{keep_going:!0});for(let o of d)r.FS.unlink(`/tmp/${o}`)}else try{let n=this._currentScript.src,o=n.substring(0,n.lastIndexOf("/"));await s.install(d.map(p=>`${o}/${p}`),{keep_going:!0})}catch{await s.install(d.map(n=>`${f}/${n}`),{keep_going:!0})}r.runPython("from aksharamukha import *");let i=new t(r);return i.process("autodetect","Devanagari","praNAm"),i}async test(){if(await this.pyodide.runPythonAsync("1 + 1")!==2)throw new Error("Pyodide not functioning correctly.")}process(e,r,s,{nativize:i,param:n,preOptions:o,postOptions:p}=a){let c=g({src:e,tgt:r,txt:s,props:{nativize:i??a.nativize,param:n??a.param,preOptions:o??a.preOptions,postOptions:p??a.postOptions}});return this.pyodide.runPython(c)}async processAsync(e,r,s,{nativize:i,param:n,preOptions:o,postOptions:p}=a){let c=g({src:e,tgt:r,txt:s,props:{nativize:i??a.nativize,param:n??a.param,preOptions:o??a.preOptions,postOptions:p??a.postOptions}});return await this.pyodide.runPythonAsync(c)}autoDetect(e,r=!1){let s=P({txt:e,plugin:r});return this.pyodide.runPython(s)}autoDetectAsync(e,r=!1){let s=P({txt:e,plugin:r});return this.pyodide.runPythonAsync(s)}};async function N(){return await(0,y.loadPyodide)({indexURL:"./node_modules/pyodide",packageCacheDir:"./node_modules/pyodide"})}function g(t){return`
		from aksharamukha import transliterate
		transliterate.process(
			${JSON.stringify(t.src)},
			${JSON.stringify(t.tgt)},
			${JSON.stringify(t.txt)},
			nativize=${t.props.nativize?"True":"False"},
			param=${JSON.stringify(t.props.param)},
			pre_options=${JSON.stringify(t.props.preOptions)},
			post_options=${JSON.stringify(t.props.postOptions)}
		)
	`}function P(t){return`
		from aksharamukha import transliterate
		transliterate.auto_detect(
			${JSON.stringify(t.txt)},
			${t.plugin?"True":"False"}
		)
	`}function z(){if(!w)throw new Error("getCurrentDir is only supported in Node.js environment.");try{return __dirname}catch{return C.dirname}}var I=l;0&&(module.exports={ProcessParams,defaultProcessProps});
//# sourceMappingURL=index.cjs.map