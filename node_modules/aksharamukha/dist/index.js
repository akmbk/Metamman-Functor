import{loadPyodide as f}from"pyodide";var d=["jaconv-0.4.0-py3-none-any.whl","marisa_trie-1.3.2.dev0-cp313-cp313-pyodide_2025_0_wasm32.whl","aksharamukha-2.3-py3-none-any.whl"],m="https://github.com/paramsiddharth/aksharamukha.js/releases/download/v2.3.0-0";var g=typeof window>"u"||typeof process<"u"&&process.versions?.node,w={default:"default",scriptCode:"script_code",langCode:"lang_code",langName:"lang_name"},n={nativize:!0,param:w.default,preOptions:[],postOptions:[]},l=class s{static _isTestEnv=!1;static _currentScript;pyodide;constructor(e){this.pyodide=e}static _setCurrentScript(e){this._currentScript=e}static async new(e){let t=e?.pyodide;t==null&&(this._isTestEnv?t=await O():t=await f()),await t.loadPackage("micropip");let o=t.pyimport("micropip");if(g){let i=await import("fs");for(let r of d){let a,c=k();try{let u=`${c}/${r}`;a=i.readFileSync(u)}catch(u){console.warn(`Wheel file missing in script directory, trying ../../downloads: ${u}`);let P=`${c}/../../downloads/${r}`;a=i.readFileSync(P)}t.FS.writeFile(`/tmp/${r}`,a)}await o.install(d.map(r=>`emfs:/tmp/${r}`),{keep_going:!0});for(let r of d)t.FS.unlink(`/tmp/${r}`)}else try{let i=this._currentScript.src,r=i.substring(0,i.lastIndexOf("/"));await o.install(d.map(a=>`${r}/${a}`),{keep_going:!0})}catch{await o.install(d.map(i=>`${m}/${i}`),{keep_going:!0})}t.runPython("from aksharamukha import *");let p=new s(t);return p.process("autodetect","Devanagari","praNAm"),p}async test(){if(await this.pyodide.runPythonAsync("1 + 1")!==2)throw new Error("Pyodide not functioning correctly.")}process(e,t,o,{nativize:p,param:i,preOptions:r,postOptions:a}=n){let c=y({src:e,tgt:t,txt:o,props:{nativize:p??n.nativize,param:i??n.param,preOptions:r??n.preOptions,postOptions:a??n.postOptions}});return this.pyodide.runPython(c)}async processAsync(e,t,o,{nativize:p,param:i,preOptions:r,postOptions:a}=n){let c=y({src:e,tgt:t,txt:o,props:{nativize:p??n.nativize,param:i??n.param,preOptions:r??n.preOptions,postOptions:a??n.postOptions}});return await this.pyodide.runPythonAsync(c)}autoDetect(e,t=!1){let o=h({txt:e,plugin:t});return this.pyodide.runPython(o)}autoDetectAsync(e,t=!1){let o=h({txt:e,plugin:t});return this.pyodide.runPythonAsync(o)}};async function O(){return await f({indexURL:"./node_modules/pyodide",packageCacheDir:"./node_modules/pyodide"})}function y(s){return`
		from aksharamukha import transliterate
		transliterate.process(
			${JSON.stringify(s.src)},
			${JSON.stringify(s.tgt)},
			${JSON.stringify(s.txt)},
			nativize=${s.props.nativize?"True":"False"},
			param=${JSON.stringify(s.props.param)},
			pre_options=${JSON.stringify(s.props.preOptions)},
			post_options=${JSON.stringify(s.props.postOptions)}
		)
	`}function h(s){return`
		from aksharamukha import transliterate
		transliterate.auto_detect(
			${JSON.stringify(s.txt)},
			${s.plugin?"True":"False"}
		)
	`}function k(){if(!g)throw new Error("getCurrentDir is only supported in Node.js environment.");try{return __dirname}catch{return import.meta.dirname}}var S=l;export{w as ProcessParams,S as default,n as defaultProcessProps};
//# sourceMappingURL=index.js.map